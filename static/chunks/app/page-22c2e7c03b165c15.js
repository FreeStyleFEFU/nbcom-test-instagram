(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2200:function(e,t,o){Promise.resolve().then(o.t.bind(o,6083,23)),Promise.resolve().then(o.bind(o,3684))},3684:function(e,t,o){"use strict";o.r(t),o.d(t,{PhotosList:function(){return PhotosList}});var s=o(7437),n=o(2265);let makeQueries=e=>void 0!==e?Object.entries(e).reduce((e,t)=>{let[o,s]=t;return"".concat(e,"&").concat(o,"=").concat(s)},"?"):"",getPhotos=e=>fetch("https://jsonplaceholder.typicode.com/photos".concat(makeQueries(e))).then(e=>e.json()),getComments=e=>fetch("https://jsonplaceholder.typicode.com/comments".concat(makeQueries(e))).then(e=>e.json());var dist_clsx=function(){for(var e,t,o=0,s="";o<arguments.length;)(e=arguments[o++])&&(t=function r(e){var t,o,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e){if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(o=r(e[t]))&&(s&&(s+=" "),s+=o);else for(t in e)e[t]&&(s&&(s+=" "),s+=t)}return s}(e))&&(s&&(s+=" "),s+=t);return s};let Picture=e=>{let{src:t,src2x:o,alt:n,className:i,classes:l,...c}=e;return void 0===t?(console.warn("Image component must have src or sources property"),null):(0,s.jsx)("picture",{className:null==l?void 0:l.picture,children:(0,s.jsx)("img",{src:t,srcSet:o?"".concat(o," 2x"):void 0,alt:null!=n?n:"",className:dist_clsx(i,null==l?void 0:l.image),...c})})};var i=o(6938),l=o.n(i);let Spinner=e=>{let{classes:t,isHidden:o,size:n="default"}=e,i={xsmall:8,default:24,large:50,xlarge:120}[n];return(0,s.jsx)("div",{className:dist_clsx(l().root,o&&l().hidden,null==t?void 0:t.root),children:(0,s.jsx)("svg",{width:i,height:i,className:l().svg,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("circle",{className:dist_clsx(l().circle,null==t?void 0:t.circle),cx:"50",cy:"50",r:"45"})})})};var c=o(4684),a=o.n(c);let Comment=e=>{let{className:t,data:{name:o,body:n}}=e;return(0,s.jsxs)("div",{className:dist_clsx(a().root,t),children:[(0,s.jsxs)("div",{className:a().textBlock,children:[(0,s.jsx)("span",{className:a().name,children:o}),":"," ",(0,s.jsx)("span",{className:a().comment,children:n})]}),(0,s.jsx)("button",{type:"button",className:a().button,onClick:()=>prompt("Фейковый комментарий без пост запроса",""),children:"Ответить"})]})};var _=o(7404),u=o.n(_);let PhotoDetails=e=>{let{className:t,onBackButtonClick:o,data:{id:i,title:l,url:c}}=e,[a,_]=(0,n.useState)([]),[m,h]=(0,n.useState)(!1),[d,p]=(0,n.useState)(!1),fetchComments=()=>{d||(p(!0),getComments({postId:i}).then(_).catch(console.error).finally(()=>{p(!1),h(!0)}))};return(0,n.useEffect)(()=>{fetchComments()},[]),(0,s.jsxs)("article",{className:dist_clsx(u().root,t),children:[(0,s.jsxs)("header",{className:u().header,children:[(0,s.jsx)("button",{type:"button",className:u().backButton,"aria-label":"go-to-back",onClick:o,children:"<"}),(0,s.jsx)("h3",{title:l,className:u().title,children:l})]}),(0,s.jsx)(Picture,{classes:{picture:u().picture,image:u().image},src:c,alt:l}),(0,s.jsxs)("div",{className:u().commentsContainer,children:[d&&(0,s.jsx)(Spinner,{size:"large",classes:{root:u().spinner}}),m&&0===a.length&&"Комментарии отсуствуют",a.length>0&&(0,s.jsx)("ul",{className:u().comments,children:a.map(e=>(0,s.jsx)("li",{className:u().comment,children:(0,s.jsx)(Comment,{data:e})},e.id))})]})]})};var m=o(1040),h=o.n(m);let PhotosList=e=>{let{initialItems:t}=e,[o,i]=(0,n.useState)(t),[l,c]=(0,n.useState)(null),[a,_]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),d=(0,n.useRef)(null),openPhotoDetails=e=>{c(e),document.body.classList.add(h().isScrollBlocked)},p=(0,n.useCallback)(()=>{a||(_(!0),getPhotos({_start:o.length+1,_limit:30}).then(e=>{i(t=>[...t,...e])}).catch(console.error).finally(()=>{_(!1),m(!0)}))},[a,o.length]),f=(0,n.useCallback)(()=>{if(o.length>=300||null===d||null===d.current)return;if(u){m(!1);return}let e=d.current.getBoundingClientRect().bottom;window.innerHeight+1<e||p()},[p,u,o.length]);return(0,n.useEffect)(()=>(window.addEventListener("scroll",f),()=>window.removeEventListener("scroll",f)),[f]),(0,s.jsxs)("div",{className:h().root,children:[(0,s.jsx)("ul",{ref:d,className:h().list,children:o.map(e=>(0,s.jsx)("li",{className:h().item,children:(0,s.jsx)("button",{type:"button","aria-label":"go-to-photo-details",className:h().button,onClick:()=>openPhotoDetails(e),children:(0,s.jsx)(Picture,{alt:e.title,src:e.thumbnailUrl,classes:{picture:h().picture,image:h().image}})})},e.id))}),a&&(0,s.jsx)(Spinner,{size:"large",classes:{root:h().spinner}}),null!==l&&(0,s.jsx)(PhotoDetails,{data:l,onBackButtonClick:()=>{c(null),document.body.classList.remove(h().isScrollBlocked)},className:h().photoDetails})]})}},6083:function(e){e.exports={root:"Container_root__jXnmB"}},6938:function(e){e.exports={root:"Spinner_root__Q9Eaz",hidden:"Spinner_hidden__btVhe",svg:"Spinner_svg__syAWb",spin:"Spinner_spin__0MN__",circle:"Spinner_circle__FgyjM","loader-animation":"Spinner_loader-animation__PbWX1"}},4684:function(e){e.exports={name:"Comment_name__V8YKA",comment:"Comment_comment__A7oE9",button:"Comment_button__39V8U"}},7404:function(e){e.exports={root:"PhotoDetails_root__x8M9c",header:"PhotoDetails_header__xnxn6",backButton:"PhotoDetails_backButton__5RPku",title:"PhotoDetails_title__fNZUv",picture:"PhotoDetails_picture__Uuyb2",image:"PhotoDetails_image__oh0NX",commentsContainer:"PhotoDetails_commentsContainer__xn9nd",comment:"PhotoDetails_comment__bxvS4",spinner:"PhotoDetails_spinner__iMtXY"}},1040:function(e){e.exports={root:"PhotosList_root__ZvIe5",list:"PhotosList_list__1Jj8C",item:"PhotosList_item__1_rc8",button:"PhotosList_button__FM28f",picture:"PhotosList_picture__87TdJ",image:"PhotosList_image__TmEZn",spinner:"PhotosList_spinner__GH0jf",photoDetails:"PhotosList_photoDetails__7vggl",isScrollBlocked:"PhotosList_isScrollBlocked__sWkA6"}},622:function(e,t,o){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=o(2265),n=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,o){var s,a={},_=null,u=null;for(s in void 0!==o&&(_=""+o),void 0!==t.key&&(_=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,s)&&!c.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:n,type:e,key:_,ref:u,props:a,_owner:l.current}}t.jsx=q,t.jsxs=q},7437:function(e,t,o){"use strict";e.exports=o(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=2200)}),_N_E=e.O()}]);